% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/coe.R
\name{fold}
\alias{fold}
\title{Fold multiple columns into a single list-column}
\usage{
fold(.data, ..., .class = NULL)
}
\arguments{
\item{.data}{A data frame or tibble}

\item{...}{A single named argument using tidyselect syntax. The name becomes the
new list-column name, and the selection specifies which columns to fold.
Must be exactly one named argument.}

\item{.class}{Character vector of classes to add to the list-column and individual
vectors. If \code{NULL} (default), uses the new column name. For example, if folding
into a column named "coe", both the list-column and individual vectors will get
classes \code{c("coe", "list")} and \code{c("coe", "numeric")} respectively.}
}
\value{
A tibble with selected columns removed and replaced by a single list-column
containing classed numeric vectors (one per row). The list-column itself gets
class \code{c(.class, "list")} and each vector gets \code{c(.class, "numeric")}.
}
\description{
Combines multiple related columns (e.g., Fourier coefficients A1, A2, ..., B1, B2, ...)
into a single list-column where each row contains a numeric vector of all the values.
This is useful for storing morphometric coefficients compactly in a tibble.
}
\details{
The function:
\enumerate{
\item Selects columns using tidyselect (e.g., \code{A1:D5}, \code{starts_with("harm")})
\item Converts them to a matrix
\item Splits the matrix by rows to create a list of numeric vectors
\item Preserves original column names as names in each vector
\item Adds appropriate classes to both the list-column and individual vectors
\item Removes the original columns and adds the new list-column
}

This is particularly useful after Fourier analysis where you have many harmonic
coefficient columns that you want to store together as a single "coe" object.
}
\examples{
# Create sample data with coefficient columns
df <- tibble::tibble(
  id = 1:3,
  A1 = c(1, 2, 3),
  A2 = c(4, 5, 6),
  B1 = c(7, 8, 9),
  B2 = c(10, 11, 12)
)

# Fold coefficient columns into a single list-column
df_folded <- fold(df, coe = A1:B2)
df_folded$coe[[1]]
#    A1    A2    B1    B2
#     1     4     7    10

# List-column has classes
class(df_folded$coe)
# [1] "coe"  "list"

# Each element also has classes and preserves names
class(df_folded$coe[[1]])
# [1] "coe"     "numeric"
names(df_folded$coe[[1]])
# [1] "A1" "A2" "B1" "B2"

# Can specify custom classes (e.g., for efourier)
fold(df, coe = A1:B2, .class = c("eft", "coe"))

}
\seealso{
\code{\link[=unfold]{unfold()}} for the reverse operation, \code{\link[=get_coe_cols]{get_coe_cols()}} for detection
}
