<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MomX philosophy • Momocs2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="MomX philosophy">
<meta property="og:description" content="Momocs2">
<meta property="og:image" content="http://momx.github.io/Momocs2/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Momocs2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/coo.html">coo_ modify shapes</a>
    </li>
    <li>
      <a href="../articles/intro-to.html">Introduction to</a>
    </li>
    <li>
      <a href="../articles/intro.html">MomX philosophy</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MomX/Momocs2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>MomX philosophy</h1>
            
      
      
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<blockquote>
<p><strong>Note: Move it to MomX when it’s ready</strong></p>
</blockquote>
<p>The aim of this vignette is two-fold:</p>
<ol style="list-style-type: decimal">
<li>Theorize what a minimalist and universal grammar for morphometrics could be. It is strongly flavoured with programmer perspective and enamoured with <a href="https://adv-r.hadley.nz/vectors-chap.html#tibble">tibbles</a> and particularly <a href="https://adv-r.hadley.nz/vectors-chap.html#list-columns">list-columns</a>.</li>
<li>Glimpse at its implemenation in the <a href="https://momx.github.io/">MomX ecosystem</a>
</li>
</ol>
<div id="a-grammar-for-morphometrics" class="section level2">
<h2 class="hasAnchor">
<a href="#a-grammar-for-morphometrics" class="anchor"></a>A grammar for morphometrics</h2>
<p><em>This section is an essay on the programming side of morphometrics yet I believe it has more general merits.</em></p>
<p>Morphometrics is the study of shape (co)variation. It typically consists in mapping shapes acquired from images into synthetic descriptors.</p>
<p>A universal scheme would be<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>:</p>
<center>
<code>raw + cov -E-&gt; coo + cov -M-&gt; coe + cov</code>
</center>
<ul>
<li>
<strong>raw</strong>, <strong>coo</strong>, <strong>coe</strong> are typically images, coordinates and coefficients, respectively</li>
<li>
<strong>cov</strong>ariates can be absent, but are usually carried along the pipeline to explore covariations with <strong>coe</strong>
</li>
<li>
<code>-E-&gt;</code> is the process of <em>acquiring</em> information such as landmark or outline <strong>coo</strong>rdinates from the <strong>raw</strong> object, typically captured as an image.</li>
<li>
<code>-M-&gt;</code> is the process of <em>turning</em> these <strong>coo</strong>rdinates into more suitable variables, named <strong>coe</strong>fficients.</li>
</ul>
<p>Dimensions of <code>raw</code>, <code>coo</code> and <code>coe</code> usually decreases along the pipe, they get more and more synthetic. Dimensions can be arbitrary though but let’s brush some examples.</p>
<p>Typically :</p>
<ul>
<li>
<strong>raw</strong> are images (<code>array</code> of RGB images, or <code>matrix</code> of grey images)</li>
<li>
<strong>coo</strong> are coordinates (2-columns <code>matrices</code> of homogeneous length (landmarks) or maybe not (raw outlines coordinates) length, but this could anything else the most obvious beign 3D methods)</li>
<li>
<strong>coe</strong> are coefficients whose dimensions are usually wider with less rows but more columns (think of Fourier coefficients)</li>
</ul>
</div>
<div id="momx-implementation" class="section level2">
<h2 class="hasAnchor">
<a href="#momx-implementation" class="anchor"></a>MomX implementation</h2>
<p><em>This section gives the shared principles of this grammar implementation in MomX packages. For details, consult each package vignettes. Also you can skip Momocs history yet it contextualises the “why” before the “how”.</em></p>
<div id="a-word-on-momocs-history" class="section level4">
<h4 class="hasAnchor">
<a href="#a-word-on-momocs-history" class="anchor"></a>A word on Momocs history</h4>
<p>I started what would become Momocs in 2011 and still, until spring 2020, I have never been really happy with its general architecture. It (or rather <em>I</em>) lacked a theoretical thought of what morphometrics are, on the developper-side (this section), that could also be implemented in an user-friendly way (next one).</p>
<p>My attempts were numerous and some were painful. Among these attempts, two Momocs generations were available: first, the early S4 version (the one <a href="https://www.jstatsoft.org/article/view/v056i13">published</a> in the <em>Journal of Statistical Software</em>); then the S3 version alos dealing with open curves and landmarks (all Momocs version &gt;= 0.3).</p>
<p>I was not happy with these since <code>coo</code> and <code>coe</code> were kind of free-floating and were not natively tight together and the programmatic glue was incomplete, error-prone and overall boring for both programmer-me and front-user-me (and likely front-user you too).</p>
<p>In the meantime, the <a href="https:://tidyverse.org">tidyverse</a> became real and then matured. I also realized list-columns existed since the early days, including in in gold old <code>data.frame</code>s<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. And then it took me a little more time to understand how to code using them in a <a href="https://tidyeval.tidyverse.org/">tidyeval</a> framework.</p>
<p>Changes were too strong for releasing a Momocs version 2.0. I was kind of reluctant to it at first, but it became Momocs2 instead. I also seized the occasion<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> to split the beast into smaller beauties that fed first versions of other MomX packages.</p>
</div>
<div id="a-love-declaration-to-list-columns" class="section level3">
<h3 class="hasAnchor">
<a href="#a-love-declaration-to-list-columns" class="anchor"></a>A love declaration to list-columns</h3>
<p>In brief, <strong>everything is a tibble now</strong>.</p>
<p>Across MomX, the main object is <code>mom</code>, are tibble, slightly augmented to carry list-columns informations. Typically, one or more columns in these tibbles are lists. Lists are vectors that can carry numeric, factors, logical and nested lists. These list-columns can thus contain things with very different type and dimensions like image paths, images, shape coordinates, coefficients, statistical juice, etc.</p>
<blockquote>
<p>Brush up your list skills reading this vignette (todo)</p>
</blockquote>
<p>Working with such wonderful data structure, firmly tied up with other individual variables carried (or not) comes at a very special price: it’s not cheap, it’s not free, it’s a cash machine! For you, my beloved front-user, it only bring significant pay-offs (at least compared to Momocs senior):</p>
<ul>
<li>All MomX objects are tidyverse-ready: you can natively use <code>ggplot2</code>, <code>dplyr</code>, <code>purrr</code>, <code>stringr</code> and friends on them;</li>
<li>Coordinates, coefficients, etc. are tied to their covariates in their natural structure (a <code>data.frame</code> row). Before, they were kind of free-floating in <code>$coo</code>/<code>$coe</code> in one hand, and in <code>$fac</code> on the other hand. This was boring to program and use, limiting and risky.</li>
<li>The number of such <em>partitions</em> is no longer limited. For example, For a single shape, you can now have as many variants of their original coordinates, and as many coefficients calculated from them.</li>
<li>Adding new morphometrics methods resumes to writing a <code>coo -&gt; coe</code> mapping method (eg <code>efourier</code>), possibly and inverse method (<code>coe -&gt; coe</code>) to reconstruct coordinates from coefficients.</li>
<li>Adding new coordinates shapes, eg images rather than coordinates resumes to writing a new <code>*_single</code> method (eg <code>img_single</code> that would, overall behave like <code>coo_single</code> does)</li>
</ul>
<p>For the programmer-me, there are gazillions of smaller technical benefits. In brief, with a <code>tibble</code> nature, tidyverse comes for free. This massively simplifies code architecture and readability and makes a huge difference for maintenance and future development.</p>
</div>
<div id="on-the-benefits-of-tidyeval" class="section level3">
<h3 class="hasAnchor">
<a href="#on-the-benefits-of-tidyeval" class="anchor"></a>On the benefits of tidyeval</h3>
<p>You are already familiar with <a href="https://tidyeval.tidyverse.org/">tidyeval</a>: it allows the following to work:</p>
<center>
<code><a href="https://rdrr.io/r/stats/filter.html">filter(iris, Species=="setosa")</a></code>
</center>
<p>Try typing <code>Species</code> on the console: it does not exist; it only does in the <code>iris</code> environment. Practically it does not only means removing quotes, it overall simplify <em>your</em> code and help you focus more on <em>what</em> you want rather than on <em>how</em> to get it.</p>
<p>On the programming side, this behaviour is handled by <a href="https://tidyeval.tidyverse.org/">tidy evaluation</a> that delays evaluation: R waits a bit to turn <code>Species</code> into what it is suppose to means, it only evaluates it when we ask it, within the <code>select</code> context in this example.</p>
</div>
<div id="momx-package-boundaries" class="section level3">
<h3 class="hasAnchor">
<a href="#momx-package-boundaries" class="anchor"></a>MomX package boundaries</h3>
<p>Remember that ?</p>
<center>
<code>raw + cov -E-&gt; coo + cov -M-&gt; coe + cov</code>
</center>
<p>MomX packages have a strong scope on what they handle, for instance:</p>
<ul>
<li>
<a href="https://momx.github.io/Momacs/">Momacs</a> handles <code>-E-&gt;</code>
</li>
<li>
<a href="https://momx.github.io/Momit">Momit</a> handles harvest of <code>raw</code> or turning them into <code>coo</code> for foreign formats (eg <code>.tps</code>, <code>.txt</code> or <code>.mom</code>)</li>
<li>
<a href="https://momx.github.io/Momocs2/">Momocs2</a> handles <code>-M-&gt;</code>, ie shape manipulation and shape morphometrics</li>
<li>
<a href="https://momx.github.io/Momstats/">Momstat</a> helps exploring <code>coe x cov</code> relationships. <a href="https://momx.github.io/Momecs/">Momecs</a> make this exploration interactive.</li>
<li>
<a href="https://momx.github.io/Momdata/">Momdata</a> provide toy <code>raw</code>, <code>coo</code> and <code>coe</code>
</li>
<li>etc.</li>
</ul>
</div>
<div id="momocs-architecture" class="section level3">
<h3 class="hasAnchor">
<a href="#momocs-architecture" class="anchor"></a>Momocs architecture</h3>
<p>Momocs2 is a rewrite of Momocs. The main changes are:</p>
<ul>
<li>Momocs2 now only deals with core morphometrics operations: typically coo manipulation and morphometrics methods that turn them into coe.</li>
<li>Importing methods are in Momit, stat methods in Momstats. More generally see MomX. This is a much easier way for me to maintain packages and develop more.</li>
<li>Coo and Coe classes are now tibble, in other words tidyverse-ready</li>
<li>Restrictions are alleviated so that additional methods should be easier to add.</li>
<li>All graphics are ggplot2</li>
<li>You’re not bound to Momocs: you can come, use some of it and return to your preferred environment 😄</li>
</ul>
</div>
</div>
<div id="coo-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#coo-functions" class="anchor"></a>coo functions</h1>
<ul>
<li>coo_modifyers modify the shapes: return coo_single on coo_single, modify on place coo columns for coo_tbl</li>
<li>coo_descriptors describe the shape: return value on coo_single, create new columns on coo_tbl.</li>
</ul>
<p>You can pass single shapes or list of shapes to all <code>coo_*</code> methods. You’re not bound to Momocs, you can come, use it and return to your preferred environment.</p>
<p>example here</p>
</div>
<div id="section" class="section level1">
<h1></h1>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>I think this is universal whatever the morphometrics flavour, but I would be happy to be wrong<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>try <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame(x=list(1, 2), y=3)</a></code>. The printing method is less nicer than with <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble::tibble(x=list(1, 2), y=3)</a></code> but still, it would work<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>and the covid19 confinment happened timely<a href="#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://www.vincentbonhomme.fr">Vincent Bonhomme</a>, Julien Claude.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
