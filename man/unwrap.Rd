% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/verbs.R
\name{unwrap}
\alias{unwrap}
\title{Unwrap coordinates from list-column of matrices to rows}
\usage{
unwrap(.data, col, .id = NULL)
}
\arguments{
\item{.data}{A tibble with a list-column containing coordinate matrices}

\item{col}{Column name of the list-column to unwrap (unquoted). If missing,
auto-detects the \code{coo} column.}

\item{.id}{Optional name for an ID column to identify which matrix each row
came from. If \code{NULL} (default) and no other identifying columns exist,
adds a column named \code{".id"} automatically. Set to \code{FALSE} to never add
an ID column.}
}
\value{
A tibble with the list-column removed and replaced by \code{x} and \code{y}
columns (one row per coordinate point). An ID column is added if needed
to track which matrix each row belongs to.
}
\description{
Converts a list-column of coordinate matrices into separate x and y columns,
with one row per coordinate point.
}
\details{
The function converts each matrix in the list-column to a tibble with x and y
columns, then unnests to create one row per coordinate point. This is the
inverse of \code{\link[=wrap]{wrap()}}.

ID column behavior:
\itemize{
\item If \code{.data} has other columns besides the list-column: uses those for identification
\item If \code{.data} has ONLY the list-column: adds \code{.id} column automatically (or uses custom name)
\item Set \code{.id = FALSE} to never add an ID column (may create ambiguous data)
}
}
\examples{
# Start with wrapped coordinates
df_wrapped <- tibble::tibble(
  id = 1:3,
  coo = list(
    matrix(c(0, 1, 1, 0, 0, 0, 1, 1), ncol = 2, dimnames = list(NULL, c("x", "y"))),
    matrix(c(2, 3, 3, 2, 0, 0, 1, 1), ncol = 2, dimnames = list(NULL, c("x", "y"))),
    matrix(c(4, 5, 5, 4, 0, 0, 1, 1), ncol = 2, dimnames = list(NULL, c("x", "y")))
  )
)

# Unwrap to x, y rows
df_unwrapped <- df_wrapped \%>\% unwrap(coo)
df_unwrapped
# A tibble: 12 × 3
#       id     x     y
#    <int> <dbl> <dbl>
#  1     1     0     0
#  2     1     1     0
#  3     1     1     1
#  4     1     0     1
# ...

# Auto-detect coo column
df_wrapped \%>\% unwrap()

# Custom ID column name
tibble::tibble(coo = list(matrix(1:4, ncol = 2))) \%>\%
  unwrap(coo, .id = "shape_id")
# A tibble: 2 × 3
#   shape_id     x     y
#      <int> <int> <int>
# 1        1     1     3
# 2        1     2     4

# No ID column (not recommended unless you have other identifying columns)
df_wrapped \%>\% unwrap(coo, .id = FALSE)

}
\seealso{
\code{\link[=wrap]{wrap()}} for the reverse operation
}
