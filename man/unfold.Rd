% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/coe.R
\name{unfold}
\alias{unfold}
\title{Unfold a list-column into multiple columns}
\usage{
unfold(.data, col, .prefix = NULL)
}
\arguments{
\item{.data}{A data frame or tibble}

\item{col}{Name of the list-column to unfold (unquoted). If missing, automatically
detects the single coe column using \code{\link[=get_coe_cols]{get_coe_cols()}}.}

\item{.prefix}{Character string to prefix column names with. Default is to use
the original column name followed by underscore (e.g., "coe_"). Set to \code{""}
to use original names without prefix, or provide a custom prefix.}
}
\value{
A tibble with the list-column removed and replaced by multiple numeric
columns (one per vector element). Column names are prefixed by default.
Each column inherits classes from the original list-column (e.g., if the
list-column had class \code{c("eft", "coe")}, each resulting column will too).
}
\description{
Expands a list-column of numeric vectors into separate columns, one for each
element of the vectors. This is the inverse operation of \code{\link[=fold]{fold()}}. Classes from
the list-column are copied to each resulting column. If no column is specified,
automatically detects the coe column.
}
\details{
The function:
\enumerate{
\item Auto-detects the coe column if not specified
\item Extracts the list-column and its classes
\item Stacks all vectors into a matrix (by rows)
\item Converts the matrix to a tibble with prefixed column names
\item Copies classes from the list-column to each new column
\item Removes the original list-column and binds the new columns
}

This is useful when you need to access individual coefficient values for
statistical analysis, plotting, or further manipulation.
}
\examples{
# Start with folded data
df_folded <- tibble::tibble(
  id = 1:3,
  coe = list(
    c(A1 = 1, A2 = 4, B1 = 7, B2 = 10),
    c(A1 = 2, A2 = 5, B1 = 8, B2 = 11),
    c(A1 = 3, A2 = 6, B1 = 9, B2 = 12)
  )
)
class(df_folded$coe) <- c("eft", "coe", "list")

# Auto-detect coe column
df_unfolded <- unfold(df_folded)
# Or explicit
df_unfolded <- unfold(df_folded, coe)

# Unfold with default prefix (column name + "_")
df_unfolded
# A tibble: 3 Ã— 5
#      id coe_A1 coe_A2 coe_B1 coe_B2
#   <int>  <dbl>  <dbl>  <dbl>  <dbl>
# 1     1      1      4      7     10

# Each column inherits classes
class(df_unfolded$coe_A1)
# [1] "eft" "coe"

# Unfold without prefix
unfold(df_folded, coe, .prefix = "")
# Creates: A1, A2, B1, B2

# Custom prefix
unfold(df_folded, coe, .prefix = "harm_")

}
\seealso{
\code{\link[=fold]{fold()}} for the reverse operation, \code{\link[=get_coe_cols]{get_coe_cols()}} for detection
}
